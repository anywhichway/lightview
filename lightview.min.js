var e=window.currentComponent=null;document.body&&(e=window.currentComponent=document.currentComponent=document.body);var t=window.Lightview={},{observe:r}=(()=>{let r;const n=new DOMParser;t.sanitizeTemplate=e=>e.replace(/function\s+/g,"").replace(/function\(/g,"").replace(/=\s*>/g,"").replace(/(while|do|for|alert)\s*\(/g,"").replace(/console\.[a-zA-Z$]+\s*\(/g,"");const a=document.createElement("textarea");t.escapeHTML=function(e){return a.textContent=e,a.innerHTML};const o=e=>{if(e&&/^\$\{[a-zA-z_0-9.]*\}$/g.test(e))return e.substring(2,e.length-1)},i=(e,t,r=t.length-1,n)=>{for(let a=0;a<=r;a++)if(void 0===(e=null==e[t[a]]&&n?e[t[a]]="function"==typeof n?Object.create(n.prototype):{}:e[t[a]]))return;return e},s=(e,t,r,n)=>{e.addEventListener(t,(e=>{n&&Object.defineProperty(e,"self",{value:n}),r(e)}))},c=async e=>{e.preventDefault();const t=e.target;if(t===e.currentTarget){const{as:e}=await L(t);h(document,t.getAttribute("target")).forEach((t=>{for(;t.lastChild;)t.lastChild.remove();t.appendChild(document.createElement(e))}))}},l=(e,t,n=[])=>{const a=(...o)=>{if(!a.cancelled){r=a;try{e.call(t||this,...n,...o)}catch(e){}r=null}};return a.cancel=()=>a.cancelled=!0,a(),a},u=(e,t)=>{if(["null","undefined"].includes(e+"")||"any"===t)return e;const r=typeof e;if(r===t)return e;if("number"===t){if("NaN"===(e+=""))return NaN;const t=parseFloat(e);if(isNaN(t))throw new TypeError(`Unable to coerce '${e}' to 'number'`);return t}if("boolean"===t){if([1,"on","checked","selected","true"].includes(e))return!0;if(null==e||""===e)return!1}if("string"===t)return e+"";const n="function"==typeof t;if("object"===t||n){if("object"===r&&n&&e instanceof t)return e;if("string"===r){e=e.trim();try{if(n){const r=t===Date?new Date:Object.create(t.prototype);if(r instanceof Array){let t=w(e.startsWith("[")?e:`[${e}]`);if(Array.isArray(t)||(e.includes(",")?t=e.split(","):(t=w(`["${e}"]`),(!Array.isArray(t)||t[0]!==e&&1!==t.length)&&(t=null))),!Array.isArray(t))throw new TypeError(`Expected Array for parsed data ${t}:${typeof t}`);r.push(...t)}else r instanceof Date?r.setTime(Date.parse(e)):Object.assign(r,JSON.parse(e));return r}return JSON.parse(e)}catch(a){throw new TypeError(`Unable to coerce '${e}:${r}' to '${n?t.name:r}'`)}}}throw new TypeError(`Unable to coerce '${e}:${r}' to '${t}'`)},d=e=>{if(e&&"object"==typeof e){if(e.__isReactor__)return e;const t=[],n={};return new Proxy(e,{get(a,o){if("__isReactor__"===o)return!0;if(a instanceof Array){if("toJSON"===o)return function(){return[...a]};if("toString"===o)return function(){return JSON.stringify([...a])}}if(a instanceof Date){const t=e[o];if("function"==typeof t)return t.bind(e)}let i=a[o];const s=typeof i;if(r&&"symbol"!=typeof o&&"function"!==s){(n[o]||=new Set).add(r)}return void 0!==i?t.includes(i)||i&&"object"!==s||"symbol"==typeof o?("function"!==s||![Date].includes(i)&&"then"!==o||(i=i.bind(a)),i):(i&&"object"===s&&(i=d(i),t.push(i)),a[o]=i,i):void 0},async set(e,r,a){e instanceof Promise&&console.warn(`Setting ${r} = ${a} on a Promise in Reactor`);const o=typeof a;return a&&"object"===o&&a instanceof Promise&&(a=await a),e[r]!==a&&(a&&"object"===o&&(a=d(a),t.push(a)),e[r]=a,[...n[r]||[]].forEach((e=>{e.cancelled?n[r].delete(e):e()}))),!0}})}return e},m=(e,t)=>{const r=new MutationObserver((e=>{e.forEach((e=>{const r=e.target;if("attributes"===e.type){const n=e.attributeName,a=r.getAttribute(n);t&&"message"===n&&r instanceof IFrameElement&&(r.removeAttribute(n),r.dispatchEvent(new CustomEvent("message",{detail:JSON.parse(a)}))),r.observedAttributes&&r.observedAttributes.includes(n)&&a!==e.oldValue&&r.setVariableValue(n,a)}else if("childList"===e.type){for(const t of e.removedNodes)t.disconnectedCallback&&t.disconnectedCallback();for(const t of e.addedNodes)t.connectedCallback&&t.connectedCallback()}else"characterData"===e.type&&r.characterDataMutationCallback&&r.characterDataMutationCallback(r,e.oldValue,r.textContent)}))}));return r.observe(e,{subtree:!0,childList:!0}),r},h=(e,t)=>{const r=[...e.querySelectorAll(t)],n=document.createNodeIterator(e,Node.ELEMENT_NODE);let a;for(;a=n.nextNode();)a.shadowRoot&&r.push(...h(a.shadowRoot,t));return r},f=(e,t)=>{const r=new Set;if(e.shadowRoot)r.add(e),f(e.shadowRoot,t).forEach((e=>r.add(e)));else for(const n of e.childNodes)if(n.nodeType===Node.TEXT_NODE&&n.nodeValue?.includes("${"))n.template||=n.nodeValue,r.add(n);else if(n.nodeType===Node.ELEMENT_NODE){let e;[...n.attributes].forEach((t=>{t.value.includes("${")?(t.template||=t.value,r.add(n)):(t.name.includes(":")||t.name.startsWith("l-"))&&(e=t.name.includes("l-for:"),r.add(n))})),"radio"===n.getAttribute("type")&&r.add(n),e||n.shadowRoot||f(n,t).forEach((e=>r.add(e)))}return r},p=(e,...t)=>(t=t.map((e=>{const t=typeof e;try{return e&&"object"===t?JSON.stringify(e):e}catch(e){return e.toString()}})),e.reduce(((e,r,n)=>n<t.length?e+=r+t[n]:e+r),"")),b=(e,r,n,a=e.extras||{})=>{const s=typeof e,c="string"===s?e.trim():e.template;if(a.populateTemplate=p,c){const l=o(c);try{const o=l?l.split("."):null;let u;return u=o?(u=i(a,o))||(u=i(r.varsProxy,o))||(null==u?r[l]:u):Function("context","extras","with(context) { with(extras) { return populateTemplate`"+(n?c:t.sanitizeTemplate(c))+"` } }")(r.varsProxy,a),"function"==typeof u?u:(u=l||e.nodeType===Node.TEXT_NODE||n?u:t.escapeHTML(u),"string"===s?"undefined"===u?void 0:u:(e.nodeValue=l?null==u?"":"string"==typeof u?u:JSON.stringify(u):"null"==u||"undefined"==u?"":u,u))}catch(e){if(!e.message.includes("defined")){if(t.renderErrors)return e.message;throw e}return}}return e?.nodeValue},v=e=>{[...e.querySelectorAll('a[href$=".html"][target^="#"]')].forEach((e=>{e.removeEventListener("click",c),s(e,"click",c)}))};t.enableAnchors=v;const y=new WeakSet,g=(e,r,n,a,o)=>{if(y.has(e))return;y.add(e);const c="SELECT"===e.tagName||"TEXTAREA"===e.tagName?"text":e.getAttribute("type"),l=r.split(".");let d="SELECT"===e.tagName&&e.hasAttribute("multiple")?Array:(m=c)?["text","tel","email","url","search","radio","color","password"].includes(m)?"string":["number","range"].includes(m)?"number":["datetime"].includes(m)?Date:["checkbox"].includes(m)?"boolean":"any":"any";var m;const h=i(n.vars,l)||{type:d};if("any"===d&&(d=h?.type.type||h?.type),"checkbox"===c&&null==a&&(a=e.checked),null==a){const t=e.getAttribute("value");t&&(a=t)}if(o&&l.length>1){const[e,...t]=l;o=i(o,t,t.length-2,!0);const r=t[t.length-1];o[r]=u(a,d)}else{const o=n.vars[r];if(o){if(existingtype=o?.type.type||o?.type,existingtype!==d)throw new TypeError(`Attempt to bind <${e.tagName} name="${r}" type="${d}"> to variable ${r}:${o.type}`);o.reactive=!0}else{if(!t.createInputVariables)throw new TypeError(`Attempt to bind undefined variable ${r} to <${e.tagName} type="${d}>`);n.variables({[r]:d},{reactive:E,set:a})}"radio"!==c&&("string"==typeof a&&a.includes("${")?e.setAttribute("value",""):n.setVariableValue(r,u(a,d)))}let f="change";"FORM"===e.tagName?f="submit":"SELECT"===e.tagName||c&&"TEXTAREA"!==e.tagName&&!["text","number","tel","email","url","search","password"].includes(c)||(f="input");s(e,f,(t=>{t&&t.stopImmediatePropagation();let r=e.value;if("checkbox"===c?r=e.checked:"SELECT"===e.tagName&&e.hasAttribute("multiple")&&(r=[...e.querySelectorAll("option")].filter((e=>e.selected||b(e.attributes.value||e.innerText,n)===r)).map((e=>e.getAttribute("value")||e.innerText))),o){const[e,...t]=l;o=i(o,l,t.length-2,!0)}else o=i(n.varsProxy,l,l.length-2,!0);const a=l[l.length-1];o[a]=u(r,d)}),n)},w=e=>{try{return JSON.parse(e)}catch(t){return e}},E=()=>({init({variable:e,component:t}){e.reactive=!0,t.vars[e.name]=d(e)}}),A=()=>({init({variable:e,component:t}){const r=e.name;e.exported=!0,e.set=n=>{if(e.exported)if(null==n)R(t,r);else{const e=typeof n;n="string"===e?n:"object"===e&&n instanceof Array?JSON.stringify([...n]):JSON.stringify(n),k(t,r,n)}},e.set(e.value)}});let N={observed:{constant:!0,value:()=>({init({variable:e,component:t}){const r=e.name;e.value=t.hasAttribute(r)?u(t.getAttribute(r),e.type):e.value,e.observed=!0,t.observedAttributes.add(r)}})},reactive:{constant:!0,value:E},shared:{constant:!0,value:()=>({init({variable:e,component:t}){e.shared=!0,e.set=function(e){t.vars[this.name]?.shared&&t.siblings.forEach((t=>t.setVariableValue(this.name,e)))}}})},exported:{constant:!0,value:A},imported:{constant:!0,value:()=>({init({variable:e,component:t}){const r=e.name.toLowerCase();let n=t.hasAttribute(r)?t.getAttribute(r):null;"boolean"!==e.type&&"boolean"!==e.type.type||""!==n||(n=!0),e.imported=!0,e.value=null!=n?u(n,e.type):e.value}})}};const T=(e,t,r,n)=>{e&&[...e.querySelectorAll(t)].forEach((e=>{let t=e.getAttribute(r);t&&e.setAttribute(r,new URL(t,n).href)}))},C=e=>{if((e.getAttribute("src")||"").includes("/lightview.js"))return;const t=document.createElement(e.tagName.toLowerCase());[...e.attributes].forEach((e=>t.setAttribute(e.name,e.value))),t.innerHTML=e.innerHTML,e.after(t),e.remove()},x=(r,{observer:n,framed:a,href:i=window.location.href.replace("blob:",""),mount:c})=>{const h=new Set,p=[];let y;p.add=function(e){p.includes(e)||p.push(e)};const w=class r extends HTMLElement{static get instances(){return h}static setTemplateNode(e){y="TEMPLATE"===e.tagName?document.createElement("div"):e.cloneNode(!0),"TEMPLATE"===e.tagName&&(y.innerHTML=e.innerHTML,[...e.attributes].forEach((e=>y.setAttribute(e.name,e.value)))),T(y.head,"link","href",i),T(y.head,"script","src",i),T(y.body||y,"link","href",i),T(y.body||y,"script","src",i),y.mount=e.mount||e.body?.mount}constructor(){super(),this.componentBaseURI=i,e=window.currentComponent=document.currentComponent=this,h.add(this);const n=this.attachShadow({mode:"open"}),o={};var s,c;this.vars={...N,observe:{value:(...e)=>l(...e),type:"function",constant:!0},addEventListener:{value:(e,t)=>{const r=o[e]||=new Set;[...r].forEach((e=>{t+""==e+""&&r.delete(e)})),o[e].add(t)},type:"function",constant:!0},postEvent:{value:(t,r={})=>{r.type=t,r.target=e,o[t]?.forEach((e=>e(r)))},type:"function",constant:!0},self:{value:e,type:r,constant:!0}},this.varsProxy=(s=this.vars,c=this,new Proxy(s,{get(e,t){if("self"===t)return c;if(e instanceof Date)return Reflect.get(e,t);let{value:r,get:n}=e[t]||{};return n?e[t].value=n.call(e[t]):"function"==typeof r?r.bind(e):r},set(e,r,n){const a={variableName:r,value:n};if(void 0===e[r])return e[r]={type:"any",value:n},e.postEvent.value("change",a),a.defaultPrevented&&delete e[r].value,!0;const o=e[r],{value:i,shared:s,exported:c,constant:l,reactive:m,remote:h}=o;let f=o.type;if(l){const e=new TypeError(`${r}:${f} is a constant`);if(t.renderErrors)return o.value=e.toString(),!0;throw e}(null!=n||f.required)&&(n=f.validate?f.validate(n,e[r]):u(n,f));const p=typeof n,b=typeof f;if(null==n&&!f.required||"any"===f||p===f&&"string"===b||"function"===b&&!f.validate&&n&&"object"===p&&n instanceof f||o.validityState?.valid)return i!==n&&(a.oldValue=i,e[r].value=m?d(n):n,e.postEvent.value("change",a),a.defaultPrevented?e[r].value=i:h&&(o.reactive&&!1!==o?.remote?.config.put||h.put)?h.handleRemote({variable:o,config:o?.remote?.config},!0):o.set&&o.set(n)),!0;if("function"===b&&n&&"object"===p){const e=new TypeError(`Can't assign instance of '${n.constructor.name}' to variable '${r}:${f.name.replace("bound ","")}'`);if(t.renderErrors)return o.value=e.toString(),!0;throw e}const v=new TypeError(`Can't assign '${typeof n} ${"string"===p?'"'+n+'"':n}' to variable '${r}:${"function"===b?f.name.replace("bound ",""):f} ${f.required?"required":""}'`);if(t.renderErrors)return o.value=v.toString(),!0;throw v},keys:()=>[...Object.keys(s)]})),(a||r.lightviewFramed)&&this.variables({message:Object},{exported:A}),["getElementById","querySelector"].forEach((e=>{const t=this[e];Object.defineProperty(this,e,{configurable:!0,writable:!0,value:(...r)=>(t?t.call(this,...r):null)||this.shadowRoot[e](...r)})})),["querySelectorAll"].forEach((e=>{const t=this[e];Object.defineProperty(this,e,{configurable:!0,writable:!0,value:(...r)=>[...t.call(this,...r),...this.shadowRoot[e](...r)]})})),[...y.head?.childNodes||[]].forEach((e=>{const t=e.cloneNode(!0);document.head.appendChild(t),["LINK","SCRIPT"].includes(t.tagName)&&C(t)}));[...(y.body||y).childNodes].forEach((e=>{if(e.tagName&&customElements.get(e.tagName.toLowerCase())){const t=document.createElement(e.tagName);[...e.attributes].forEach((e=>t.setAttribute(e.name,e.value))),n.appendChild(t)}else{const t=e.cloneNode(!0);n.appendChild(t),["LINK","SCRIPT"].includes(t.tagName)&&C(t)}})),v(n)}get siblings(){return[...r.instances].filter((e=>e!=this))}adoptedCallback(){this.hasOwnProperty("adoptedCallback")&&this.adoptedCallback()}disconnectedCallback(){h.delete(this)}connectedCallback(){if([...(y.body||y).attributes].forEach((e=>{this.hasAttribute(e.name)||this.setAttribute(e.name,e.value)})),y.mount||c){const e=document.createElement("script");window.currentComponent=document.currentComponent=this,e.innerHTML=`with(document.currentComponent.varsProxy) { \n                        ${"undefined"!=typeof lightviewDebug&&!0===lightviewDebug?"debugger;":""}\n                        const component = document.currentComponent; \n                        (async () => { await (${y.mount||c}).call(self,self); \n                        component.compile();  })(); \n                    };`,this.appendChild(e),e.remove(),[...this.querySelectorAll('link[rel="stylesheet"][export]')].forEach((async e=>{e.remove(),this.appendChild(e)})),window.currentComponent=document.currentComponent=null}}compile(){const e=this,t=this.shadowRoot,r=f(e,i),c=(t,r,n)=>{t.forEach((t=>{if(t.nodeType===Node.TEXT_NODE&&t.template.includes("${")){if(l((()=>b(t,this,!0,t.extras))),"TEXTAREA"===t.parentElement?.tagName){const e=o(t.template);if(e){const n=e.split(".");t.extras&&t.extras[n[0]]&&(r=t.extras[n[0]]),(!this.vars[n[0]]||this.vars[n[0]].reactive||r)&&g(t.parentElement,e,this,b(t.template,this,!0,t.extras),r)}}}else if(t.nodeType===Node.ELEMENT_NODE){const a=t.attributes.value,d=a?.template;if(a&&d){const i=t.attributes.type?b(t.attributes.type,e,!1,t.extras):null,s=t.getAttribute("name"),c=a.template||(n&&s?`\${${n}.${name}}`:null);if(c){const n=o(c);if(n){const e=n.split(".");t.extras&&t.extras[e[0]]&&(r=t.extras[e[0]]),(!this.vars[e[0]]||this.vars[e[0]].reactive||r)&&g(t,n,this,b(a,this,!1,t.extras),r)}l((()=>{const r=b(c,e,!1,t.extras);if(void 0!==r)if("checkbox"===i)!0===u(r,"boolean")?t.setAttribute("checked",""):t.removeAttribute("checked");else if("SELECT"===t.tagName){const n=t.hasAttribute("multiple")?u(r,Array):[r];[...t.querySelectorAll("option")].forEach((async r=>{r.hasAttribute("value")?n.includes(b(r.attributes.value,e,!1,t.extras))&&r.setAttribute("selected",""):n.includes(b(r.innerText,e,!1,t.extras))&&r.setAttribute("selected","")}))}else if("radio"!==i){let e="string"==typeof r?r:r.toString?r.toString():JSON.stringify(r);e.startsWith('"')&&(e=e.substring(1)),e.endsWith('"')&&(e=e.substring(0,e.length-1)),a.value=e}}))}}[...t.attributes].forEach((async n=>{if("value"===n.name&&n.template)return;const{name:a,value:o}=n,d=t.attributes.name?.value;o.includes("${")&&(n.template=o),"type"===a&&"radio"==o&&d&&(g(t,d,this,void 0,r),l((()=>{const r=Function("context","with(context) { return `${"+d+"}` }")(e.varsProxy);t.attributes.value.value==r?(t.setAttribute("checked",""),t.checked=!0):(t.removeAttribute("checked"),t.checked=!1)})));const[m,...h]=a.split(":");if(""===m)l((()=>{const r=n.value;if(h[0])"true"===r?t.setAttribute(h[0],""):t.removeAttribute(h[0]);else{const r=t.attributes.value?b(t.attributes.value,e,!1,t.extras):null;"checkbox"!==(t.attributes.type?b(t.attributes.type,e,!1,t.extras):null)&&"OPTION"!==t.tagName||(!0===r?t.setAttribute("checked",""):t.removeAttribute("checked"))}}));else if("l-on"===m){let r;l((()=>{const a=b(n,this,!0,t.extras);if(r&&t.removeEventListener(h[0],r),r=null,"function"==typeof a)r=a;else try{r=Function("return "+a)()}catch(e){}r&&s(t,h[0],r,e)}))}else"l-if"===m?l((()=>{const e=b(n,this,!0,t.extras);t.style.setProperty("display",1==e||"true"===e?"revert":"none")})):"l-for"===m?(t.template||=t.innerHTML,t.clone||=t.cloneNode(!0),l((()=>{const[e="each",r="item",a="index",o="array",s=!1]=h,l=b(n,this,!1,t.extras),d=u(l,"each"===e?Array:"object"),m=("each"===e?d:Object[e](d)).reduce(((e,n,s,l)=>{const u=t.clone.cloneNode(!0),d=t.extras={[r]:n,[a]:s,[o]:l},m=[...f(u,i)].map((e=>(e.extras=d,e)));return c(m),e.push(...u.childNodes),e}),[]);if(!window.lightviewDebug)if(s)t.style.setProperty("display","none");else for(;t.lastElementChild;)t.lastElementChild.remove();m.forEach((e=>{s?t.parentElement.insertBefore(e,t):t.appendChild(e)}))}))):n.template&&l((()=>{b(n,this,!1,t.extras)}))}))}}))};r.forEach((t=>{if("FORM"===t.tagName){const n=t.getAttribute("value"),a=o(n);if(a){const n=[...r].filter((e=>t!==e&&t.contains(e)));n.forEach((e=>r.delete(e)));const o=e.vars[a]||={type:"object",reactive:!0,value:d({})};if("object"!==o.type||!o.reactive||!o.value||"object"!=typeof o.value)throw new TypeError(`Can't bind form ${t.getAttribute("id")} to non-object variable ${a}`);c(n,o.value,a)}}})),c(r),t.normalize(),n||=m(e,a),n.observe(e,{attributeOldValue:!0,subtree:!0,characterData:!0,characterDataOldValue:!0}),this.hasAttribute("l-unhide")&&this.removeAttribute("hidden"),this.dispatchEvent(new Event("mounted"))}adoptedCallback(e){this.dispatchEvent(new Event("adopted"))}disconnectedCallback(){this.dispatchEvent(new Event("disconnected"))}get observedAttributes(){return r.observedAttributes}static get observedAttributes(){return p}getVariableNames(){return Object.keys(this.vars).filter((e=>!(e in N)&&!["self","addEventListener","postEvent","observe"].includes(e)))}getVariableData(){return this.getVariableNames().reduce(((e,t)=>(e[t]=this.getVariableValue(t),e)),{})}getVariable(e){return this.vars[e]?{...this.vars[e]}:void 0}setVariableValue(e,t,{coerceTo:r=typeof t}={}){if(!this.isConnected)return h.delete(this),!1;let{type:n}=this.vars[e]||{};if(n){if(this.varsProxy[e]!==t){const a=this.vars[e];if(a.shared){const o={variableName:e,value:t=n.validate?n.validate(t,a):u(t,r),oldValue:a.value};a.value=t,this.vars.postEvent.value("change",o),o.defaultPrevented&&(a.value=t)}else this.varsProxy[e]=t}return!0}return this.vars[e]={name:name,type:r,value:u(t,r)},!1}getVariableValue(e){return this.vars[e]?.value}variables(e,{remote:t,constant:r,set:n,...a}={}){const o={remote:t,constant:r,...a};return void 0!==e&&Object.entries(e).forEach((([e,i])=>{var s;"function"==typeof(s=i)&&(s+"").match(/\(*.*\)*\s*=>/g)&&(i=i());const c=this.vars[e]||={name:e,type:i};if(void 0!==n&&void 0!==r)throw new TypeError(`${e} has the constant value ${r} and can't be set to ${n}`);if(c.value=n,void 0!==r){if(t||a.imported)throw new TypeError(`${e} can't be a constant and also remote or imported`);c.constant=!0,c.value=r}t&&("function"==typeof t&&(t=t(`./${e}`)),c.remote=t,t.handleRemote({variable:c,config:t.config,component:this})),Object.entries(a).forEach((([t,n])=>{const i=c[t]="function"==typeof n?n():n;if(i.init&&i.init({variable:c,options:o,component:this}),(void 0!==a.get||void 0!==a.set)&&void 0!==r)throw new TypeError(`${e} has the constant value ${r} and can't have a getter or setter`);c.set,i.set,c.get,i.get})),i.validate&&void 0!==c.value&&i.validate(c.value,c)})),Object.entries(this.vars).reduce(((e,[t,r])=>(e[t]={...r},e)),{})}};return w.setTemplateNode(r),w},$=(e,r,{framed:n,observer:a,href:o,mount:i}={})=>{let s=customElements.get(e);return s?(n&&!s.lightviewFramed?s.lightviewFramed=!0:console.warn(new Error(`${e} is already a CustomElement. Not redefining`)),s):(s=x(r,{observer:a,framed:n,href:o,mount:i}),customElements.define(e,s),t.customElements.set(e,s),s)};t.customElements=new Map,t.createComponent=$;const L=async(t,r)=>{const a=new URL(t.getAttribute("href"),document.baseURI),o=t.getAttribute("as")||(e=>{const t=e.split("/").pop().split(".")[0],r=t.split("-");return t.includes("-")&&r[0].length>=1?t:"l-"+t})(a.pathname);if(a.origin!==window.location.origin&&!t.getAttribute("crossorigin"))throw new URIError(`importLink:HTML imports must be from same domain: ${a.hostname}!=${location.hostname} unless 'crossorigin' attribute is set.`);if(!customElements.get(o)){const i=await(await fetch(a.href)).text(),s=n.parseFromString(i,"text/html"),c=!!s.head.querySelector('meta[name="l-unhide"]');for(const e of[...s.head.querySelectorAll("link[href]")])e.setAttribute("href",new URL(e.getAttribute("href"),a.href).href),t.hasAttribute("crossorigin")&&e.setAttribute("crossorigin",t.getAttribute("crossorigin")),e.getAttribute("href").endsWith(".html")&&"module"===e.getAttribute("rel")&&await L(e,r);(e=window.currentComponent=document.currentComponent=s.body).componentBaseURI=a.href;const l=s.getElementById("lightview");if(l){const e=document.createElement("script");e.innerHTML=l.innerHTML,document.body.appendChild(e),e.remove()}e=window.currentComponent=document.currentComponent=null,$(o,s,{observer:r,href:a.href}),c&&s.body.removeAttribute("hidden")}return{as:o}},S=({as:e="x-body",unhide:t,framed:r}={})=>{$(e,document.body,{framed:r});const n=document.createElement(e);document.body.parentElement.replaceChild(n,document.body),Object.defineProperty(document,"body",{enumerable:!0,configurable:!0,get:()=>n}),t&&n.removeAttribute("hidden")};t.bodyAsComponent=S;const O=(e,t=window.parent)=>{O.enabled&&(t instanceof HTMLIFrameElement?(e={...e,href:document.baseURI},t.contentWindow.postMessage(JSON.stringify(e),"*")):(e={...e,iframeId:document.lightviewId,href:document.baseURI},t.postMessage(JSON.stringify(e),"*")))},k=(e,t,r)=>{e.getAttribute(t)!==r&&e.setAttribute(t,r),O({type:"setAttribute",argsList:[t,r]})},R=(e,t,r)=>{e.removeAttribute(t),O({type:"removeAttribute",argsList:[t]})},P=(e,t=[])=>(t.unshift(e),e.parentNode&&e.parentNode!=e.parentNode&&P(e.parentNode,t),t),M=new URL(document.currentScript.getAttribute("src"),document.baseURI);let j,V;j||s(window,"DOMContentLoaded",(e=>j=e));const D=async e=>{await(async()=>{const e=m(document.body);for(const t of[...document.querySelectorAll('link[href$=".html"][rel=module]')])await L(t,e)})();const t=!!document.querySelector('meta[name="l-unhide"]'),r=!!document.querySelector('meta[name="l-isolate"]'),n=!!document.querySelector('meta[name="l-enableFrames"]');if(e){if(e({unhide:t,isolated:r,enableFrames:n,framed:!0}),!r){O.enabled=!0,s(window,"message",(({data:e})=>{const{type:t,argsList:r}=JSON.parse(e);if("framed"===t){const e=()=>{const{width:e,height:t}=document.body.getBoundingClientRect();O({type:"setAttribute",argsList:["width",e]}),O({type:"setAttribute",argsList:["height",t+20]})};return e(),n=document.body,a=()=>e(),void new ResizeObserver((()=>a())).observe(n)}var n,a;if(["setAttribute","removeAttribute"].includes(t)){let[e,n]=[...r];const a=document.body.vars[e];"removeAttribute"===t&&(n=void 0),a&&a.imported&&document.body.setVariableValue(e,n)}}));const e=new URL(document.baseURI);document.lightviewId=e.searchParams.get("id"),O({type:"DOMContentLoaded"})}}else M.searchParams.has("as")&&S({as:M.searchParams.get("as"),unhide:t});if(n&&(O.enabled=!0,s(window,"message",(e=>{const{type:t,iframeId:r,argsList:n,href:a}=JSON.parse(e.data),o=document.getElementById(r);if(o){if("DOMContentLoaded"===t)return O({type:"framed",href:document.baseURI},o),Object.defineProperty(j,"currentTarget",{enumerable:!1,configurable:!0,value:o}),j.href=a,j.srcElement=o,j.bubbles=!1,j.path=P(o),Object.defineProperty(j,"timeStamp",{enumerable:!1,configurable:!0,value:performance.now()}),void o.dispatchEvent(j);if("setAttribute"===t){const[e,t]=[...n];return void(o.getAttribute(e)!==t+""&&o.setAttribute(e,t))}if("removeAttribute"===t)return void o.removeAttribute(...n)}console.warn("iframe posted a message without providing an id",e)})),!V)){const e=V=new MutationObserver((e=>{document.getElementById("console");for(const{target:t,attributeName:r,oldValue:n}of e){const e=t.getAttribute(r);["height","width","message"].includes(r)||(e?e!==n&&O({type:"setAttribute",argsList:[r,e]},iframe):O({type:"removeAttribute",argsList:[r]},iframe)),"message"===r?e&&(t.removeAttribute("message"),t.dispatchEvent(new CustomEvent("message",{target:t,detail:JSON.parse(e)}))):t.dispatchEvent(new CustomEvent("attribute.changed",{target:t,detail:{attributeName:r,value:e,oldValue:n}}))}}));[...document.body.querySelectorAll("iframe")].forEach((t=>{e.observe(t,{attributes:!0,attributeOldValue:!0})}))}};return t.whenFramed=(e,{isolated:t}={})=>{s(document,"DOMContentLoaded",(t=>D(e)))},t.loader=D,window.location!==window.parent.location&&window.parent instanceof Window&&window.parent===window||s(document,"DOMContentLoaded",(()=>D())),{observe:l}})();