<!-- SEO-friendly SPA Shim -->
<script src="../../../lightview-router.js"></script>
<script>
    if (window.LightviewRouter) {
        LightviewRouter.base('../../index.html');
    }
</script>

<!-- Load the page-specific stylesheet -->
<link rel="stylesheet" href="./index.css">

<div class="section">
    <div class="section-content" style="max-width: 1000px;">
        <!-- Breadcrumbs -->
        <div id="page-breadcrumbs"></div>
        <script type="module">
            const { $ } = Lightview;
            const { default: Breadcrumbs } = await import('/components/navigation/breadcrumbs.js');

            const breadcrumbs = Breadcrumbs({
                items: [
                    { label: 'Components', href: '/docs/components' },
                    { label: 'Button' }
                ]
            });

            $('#page-breadcrumbs').insert(breadcrumbs);
        </script>

        <h1>Button</h1>
        <p>
            Buttons allow the user to take actions or make choices.
            Available in multiple variants, colors, and sizes with reactive state support.
        </p>

        <!-- Interactive Examples -->
        <div id="basic-example-card"></div>
        <div id="reactive-example-card"></div>

        <script type="module">
            const { default: Card } = await import('/components/data-display/card.js');
            const { tags, $ } = Lightview;
            const { h2, p, pre, code, div } = tags;

            // Helper to generate Card with Examplify setup
            const createExampleCard = (title, description, codeContent, idPrefix, height = '100px') => {
                const card = Card({
                    styleSheets: ['/docs/components/index.css'],
                    useShadow: true // Explicitly enable shadow DOM to ensure consistent behavior
                },
                    Card.Body({},
                        h2({ class: "card-title" }, title),
                        p({ class: "text-sm", style: "opacity: 0.7; margin-bottom: 1rem;" }, description),
                        div({ id: `${idPrefix}-preview`, style: "margin-bottom: 1rem;" }),
                        pre({ class: "code-block" },
                            code({ id: `${idPrefix}-code`, contenteditable: true }, codeContent)
                        )
                    )
                );
                return card;
            };

            const runExamplify = (containerId, idPrefix, height) => {
                if (typeof examplify !== 'undefined') {
                    const container = document.getElementById(containerId);
                    if (!container) return;

                    // Look for shadow root on the first child of the container (the Card host)
                    let searchRoot = document;
                    const cardHost = container.firstElementChild;
                    if (cardHost && cardHost.shadowRoot) {
                        searchRoot = cardHost.shadowRoot;
                    }

                    const codeEl = searchRoot.getElementById(`${idPrefix}-code`);
                    const previewEl = searchRoot.getElementById(`${idPrefix}-preview`);

                    if (codeEl && previewEl) {
                        const result = examplify(codeEl, {
                            scripts: ['/lightview.js', '/lightview-x.js'],
                            type: 'module',
                            html: '<div id="demo"></div>',
                            height: height
                        });
                        if (result && result.iframe) {
                            previewEl.appendChild(result.iframe);
                            result.iframe.style.border = '1px solid oklch(var(--bc) / 0.2)';
                            result.iframe.style.borderRadius = '0.5rem';
                        }
                    }
                }
            };

            // 1. Basic Example Code
            const basicCode = `const { default: Button } = await import('/components/actions/button.js');
const { tags, $ } = Lightview;
const { div } = tags;

const buttons = div({ style: 'display: flex; gap: 0.5rem;' },
    Button({}, 'Default'),
    Button({ color: 'primary' }, 'Primary'),
    Button({ color: 'secondary' }, 'Secondary')
);

$('#demo').insert(buttons);`;

            // 2. Reactive Example Code
            const reactiveCode = `const { default: Button } = await import('/components/actions/button.js');
const { signal, tags, $ } = Lightview;
const { div, span } = tags;

const isLoading = signal(false);

const demo = div({ style: 'display: flex; gap: 1rem; align-items: center;' },
    Button({ 
        color: 'primary',
        loading: () => isLoading.value,
        onclick: async () => {
            isLoading.value = true;
            await new Promise(r => setTimeout(r, 2000));
            isLoading.value = false;
        }
    }, 'Save Changes'),
    span({ style: 'opacity: 0.7;' },
        () => isLoading.value ? '‚è≥ Saving...' : 'Click to test'
    )
);

$('#demo').insert(demo);`;

            // Insert Cards
            $('#basic-example-card').insert(createExampleCard('Basic Usage', 'Standard buttons with default styling.', basicCode, 'basic', '100px'));
            $('#reactive-example-card').insert(createExampleCard('Reactive State', 'Buttons with built-in loading and state handling.', reactiveCode, 'reactive', '80px'));

            // Run Examplify
            runExamplify('basic-example-card', 'basic');
            runExamplify('reactive-example-card', 'reactive');
        </script>

        <!-- Props Table -->
        <h2 class="text-xl font-bold" style="margin-bottom: 1rem;">Props</h2>
        <div style="overflow-x: auto; margin-bottom: 2rem;">
            <table class="table table-zebra">
                <thead>
                    <tr>
                        <th>Prop</th>
                        <th>Type</th>
                        <th>Default</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>color</code></td>
                        <td>string</td>
                        <td>-</td>
                        <td>'primary' | 'secondary' | 'accent' | 'neutral' | 'info' | 'success' | 'warning' | 'error' |
                            'ghost' | 'link'</td>
                    </tr>
                    <tr>
                        <td><code>size</code></td>
                        <td>string</td>
                        <td>'md'</td>
                        <td>'xs' | 'sm' | 'md' | 'lg'</td>
                    </tr>
                    <tr>
                        <td><code>variant</code></td>
                        <td>string</td>
                        <td>-</td>
                        <td>'outline' | 'soft' | 'dash' | 'wide' | 'block' | 'square' | 'circle'</td>
                    </tr>
                    <tr>
                        <td><code>disabled</code></td>
                        <td>boolean | function</td>
                        <td>false</td>
                        <td>Disable the button (supports reactive function)</td>
                    </tr>
                    <tr>
                        <td><code>loading</code></td>
                        <td>boolean | function</td>
                        <td>false</td>
                        <td>Show loading spinner (supports reactive function)</td>
                    </tr>
                    <tr>
                        <td><code>active</code></td>
                        <td>boolean</td>
                        <td>false</td>
                        <td>Force active/pressed state</td>
                    </tr>
                    <tr>
                        <td><code>glass</code></td>
                        <td>boolean</td>
                        <td>false</td>
                        <td>Glass morphism effect</td>
                    </tr>
                    <tr>
                        <td><code>noAnimation</code></td>
                        <td>boolean</td>
                        <td>false</td>
                        <td>Disable click animation</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Visual Gallery (Static) -->

        <!-- Colors -->
        <h2 class="text-xl font-bold" style="margin-bottom: 1rem;">Colors</h2>
        <div id="colors-demo" style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 2rem;"></div>

        <!-- Variants -->
        <h2 class="text-xl font-bold" style="margin-bottom: 1rem;">Variants</h2>
        <div id="variants-demo" style="margin-bottom: 2rem;"></div>

        <!-- Sizes -->
        <h2 class="text-xl font-bold" style="margin-bottom: 1rem;">Sizes</h2>
        <div id="sizes-demo"
            style="display: flex; flex-wrap: wrap; align-items: flex-end; gap: 0.5rem; margin-bottom: 2rem;"></div>

        <!-- States -->
        <h2 class="text-xl font-bold" style="margin-bottom: 1rem;">States</h2>
        <div id="states-demo" style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 2rem;"></div>

        <!-- Special Shapes -->
        <h2 class="text-xl font-bold" style="margin-bottom: 1rem;">Special Shapes</h2>
        <div id="shapes-demo" style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 2rem;"></div>

        <script type="module">
            const { default: Button } = await import('/components/actions/button.js');
            const { tags, $ } = Lightview;
            const { div, h3, svg, path } = tags;

            // Helper to create X icon SVG Component
            const XIcon = () => svg(
                { xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24", style: "width: 1.5rem; height: 1.5rem; stroke: currentColor;" },
                path({ "stroke-linecap": "round", "stroke-linejoin": "round", "stroke-width": "2", d: "M6 18L18 6M6 6l12 12" })
            );

            // Colors Demo
            $('#colors-demo').insert([
                Button({ useShadow: true }, "Default"),
                Button({ color: "neutral" }, "Neutral"),
                Button({ color: "primary" }, "Primary"),
                Button({ color: "secondary" }, "Secondary"),
                Button({ color: "accent" }, "Accent"),
                Button({ color: "info" }, "Info"),
                Button({ color: "success" }, "Success"),
                Button({ color: "warning" }, "Warning"),
                Button({ color: "error" }, "Error")
            ]);

            // Variants Demo
            $('#variants-demo').insert([
                div({ style: "margin-bottom: 1rem;" },
                    h3({ class: "font-semibold", style: "margin-bottom: 0.5rem;" }, "Outline"),
                    div({ style: "display: flex; flex-wrap: wrap; gap: 0.5rem;" },
                        Button({ variant: "outline" }, "Default"),
                        Button({ variant: "outline", color: "primary" }, "Primary"),
                        Button({ variant: "outline", color: "secondary" }, "Secondary"),
                        Button({ variant: "outline", color: "accent" }, "Accent")
                    )
                ),
                div({ style: "margin-bottom: 1rem;" },
                    h3({ class: "font-semibold", style: "margin-bottom: 0.5rem;" }, "Soft"),
                    div({ style: "display: flex; flex-wrap: wrap; gap: 0.5rem;" },
                        Button({ variant: "soft" }, "Default"),
                        Button({ variant: "soft", color: "primary" }, "Primary"),
                        Button({ variant: "soft", color: "secondary" }, "Secondary"),
                        Button({ variant: "soft", color: "accent" }, "Accent")
                    )
                ),
                div({},
                    h3({ class: "font-semibold", style: "margin-bottom: 0.5rem;" }, "Ghost & Link"),
                    div({ style: "display: flex; flex-wrap: wrap; gap: 0.5rem;" },
                        Button({ color: "ghost" }, "Ghost"),
                        Button({ color: "link" }, "Link")
                    )
                )
            ]);

            // Sizes Demo
            $('#sizes-demo').insert([
                Button({ color: "primary", size: "xs" }, "Extra Small"),
                Button({ color: "primary", size: "sm" }, "Small"),
                Button({ color: "primary" }, "Medium"),
                Button({ color: "primary", size: "lg" }, "Large")
            ]);

            // States Demo
            $('#states-demo').insert([
                Button({ color: "primary" }, "Normal"),
                Button({ color: "primary", active: true }, "Active"),
                Button({ color: "primary", disabled: true }, "Disabled"),
                Button({ color: "primary", loading: true }, "Loading")
            ]);

            // Special Shapes Demo
            $('#shapes-demo').insert([
                Button({ variant: "wide" }, "Wide"),
                Button({ variant: "block" }, "Block (Full Width)"),
                Button({ variant: "square" }, XIcon()),
                Button({ variant: "circle" }, XIcon())
            ]);
        </script>



    </div>
</div>