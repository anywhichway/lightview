<!-- SEO-friendly SPA Shim -->
<script src="../../../lightview-router.js"></script>
<script>
    if (window.LightviewRouter) {
        LightviewRouter.base('../../index.html');
    }
</script>

<div class="section">
    <div class="section-content" style="max-width: 1000px;">
        <!-- Breadcrumbs -->
        <div id="page-breadcrumbs" style="margin-bottom: 1rem;"></div>
        <script type="module">
            const { $ } = Lightview;
            const { default: Breadcrumbs } = await import('/components/navigation/breadcrumbs.js');

            const breadcrumbs = Breadcrumbs({
                items: [
                    { label: 'Components', href: '/docs/components' },
                    { label: 'Modal' }
                ]
            });

            $('#page-breadcrumbs').content(breadcrumbs);
        </script>

        <h1>Modal</h1>
        <p class="text-lg" style="opacity: 0.7; margin-bottom: 1.5rem;">
            Modal is used to show a dialog or a box when you click a button.
            Uses the native HTML <code>&lt;dialog&gt;</code> element for accessibility.
        </p>

        <!-- Basic Example with Examplify -->
        <div class="card bg-base-200" style="margin-bottom: 2rem;">
            <div class="card-body">
                <h2 class="card-title">Basic Example</h2>
                <p class="text-sm" style="opacity: 0.7; margin-bottom: 1rem;">Simple modal with open/close functionality
                </p>

                <!-- Preview container -->
                <div id="basic-preview" style="margin-bottom: 1rem;"></div>

                <!-- Code display -->
                <pre class="bg-base-300 rounded-lg text-sm" style="padding: 1rem; overflow-x: auto;"><code id="basic-code">
const { default: Modal } = await import('/components/actions/modal.js');
const { default: Button } = await import('/components/actions/button.js');

const { tags, $ } = Lightview;
const { h3, p } = tags;

const modalId = 'my_modal';

// Create the modal
const modal = Modal({ id: modalId },
    Modal.Box({},
        h3({ class: 'text-lg font-bold' }, 'Hello! ðŸ‘‹'),
        p({ class: 'py-4' }, 'This modal was created with Lightview components.'),
        Modal.Action({},
            Button({ onclick: () => Modal.close(modalId) }, 'Close')
        )
    ),
    Modal.Backdrop({})
);

// Create trigger button
const trigger = Button({ 
    color: 'primary',
    onclick: () => Modal.open(modalId)
}, 'Open Modal');

$('#demo').content(trigger, modal);</code></pre>
            </div>
        </div>

        <!-- Reactive Example with Examplify -->
        <div class="card bg-base-200" style="margin-bottom: 2rem;">
            <div class="card-body">
                <h2 class="card-title">Confirmation Dialog</h2>
                <p class="text-sm" style="opacity: 0.7; margin-bottom: 1rem;">Modal with confirm/cancel actions</p>

                <!-- Preview container -->
                <div id="reactive-preview" style="margin-bottom: 1rem;"></div>

                <!-- Code display -->
                <pre class="bg-base-300 rounded-lg text-sm" style="padding: 1rem; overflow-x: auto;"><code id="reactive-code">
const { default: Modal } = await import('/components/actions/modal.js');
const { default: Button } = await import('/components/actions/button.js');

const { signal, tags, $ } = Lightview;
const { div, h3, p } = tags;

const status = signal('Ready');
const modalId = 'confirm_modal';

const handleConfirm = () => {
    status.value = 'âœ… Confirmed!';
    Modal.close(modalId);
};

const handleCancel = () => {
    status.value = 'âŒ Cancelled';
    Modal.close(modalId);
};

const confirmModal = Modal({ id: modalId },
    Modal.Box({},
        h3({ class: 'text-lg font-bold' }, 'Are you sure?'),
        p({ class: 'py-4' }, 'This action cannot be undone.'),
        Modal.Action({},
            Button({ color: 'ghost', onclick: handleCancel }, 'Cancel'),
            Button({ color: 'error', onclick: handleConfirm }, 'Delete')
        )
    ),
    Modal.Backdrop({})
);

const demo = div({ class: 'flex items-center gap-4' },
    Button({ 
        color: 'error',
        variant: 'outline',
        onclick: () => Modal.open(modalId)
    }, 'Delete Item'),
    p({ class: 'text-sm opacity-70' }, () => `Status: ${status.value}`),
    confirmModal
);

$('#demo').content(demo);</code></pre>
            </div>
        </div>

        <!-- Props Table -->
        <h2 class="text-xl font-bold" style="margin-bottom: 1rem;">Props</h2>
        <div style="overflow-x: auto; margin-bottom: 2rem;">
            <table class="table table-zebra">
                <thead>
                    <tr>
                        <th>Prop</th>
                        <th>Type</th>
                        <th>Default</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>id</code></td>
                        <td>string</td>
                        <td>-</td>
                        <td>Required unique ID for the modal</td>
                    </tr>
                    <tr>
                        <td><code>open</code></td>
                        <td>boolean | function</td>
                        <td>false</td>
                        <td>Control open state (reactive)</td>
                    </tr>
                    <tr>
                        <td><code>position</code></td>
                        <td>string</td>
                        <td>'middle'</td>
                        <td>'top' | 'middle' | 'bottom'</td>
                    </tr>
                    <tr>
                        <td><code>onClose</code></td>
                        <td>function</td>
                        <td>-</td>
                        <td>Callback when modal closes</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Static Methods -->
        <h2 class="text-xl font-bold" style="margin-bottom: 1rem;">Static Methods</h2>
        <div style="overflow-x: auto; margin-bottom: 2rem;">
            <table class="table table-zebra">
                <thead>
                    <tr>
                        <th>Method</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>Modal.open(id)</code></td>
                        <td>Open a modal by its ID</td>
                    </tr>
                    <tr>
                        <td><code>Modal.close(id)</code></td>
                        <td>Close a modal by its ID</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Sub-components -->
        <h2 class="text-xl font-bold" style="margin-bottom: 1rem;">Sub-components</h2>
        <div style="overflow-x: auto; margin-bottom: 2rem;">
            <table class="table table-zebra">
                <thead>
                    <tr>
                        <th>Component</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>Modal.Box</code></td>
                        <td>The content container</td>
                    </tr>
                    <tr>
                        <td><code>Modal.Action</code></td>
                        <td>Container for action buttons (typically at bottom)</td>
                    </tr>
                    <tr>
                        <td><code>Modal.Backdrop</code></td>
                        <td>Click-to-close backdrop</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Positions -->
        <h2 class="text-xl font-bold" style="margin-bottom: 1rem;">Positions</h2>
        <div class="example-flex" style="margin-bottom: 2rem;">
            <button class="btn" onclick="document.getElementById('modal_top').showModal()">Top</button>
            <button class="btn" onclick="document.getElementById('modal_middle').showModal()">Middle (default)</button>
            <button class="btn" onclick="document.getElementById('modal_bottom').showModal()">Bottom</button>
        </div>

        <dialog id="modal_top" class="modal modal-top">
            <div class="modal-box">
                <h3 class="text-lg font-bold">Top Modal</h3>
                <p class="py-4">This modal appears at the top.</p>
                <div class="modal-action">
                    <form method="dialog"><button class="btn">Close</button></form>
                </div>
            </div>
            <form method="dialog" class="modal-backdrop"><button>close</button></form>
        </dialog>

        <dialog id="modal_middle" class="modal modal-middle">
            <div class="modal-box">
                <h3 class="text-lg font-bold">Middle Modal</h3>
                <p class="py-4">This modal appears in the middle (default).</p>
                <div class="modal-action">
                    <form method="dialog"><button class="btn">Close</button></form>
                </div>
            </div>
            <form method="dialog" class="modal-backdrop"><button>close</button></form>
        </dialog>

        <dialog id="modal_bottom" class="modal modal-bottom">
            <div class="modal-box">
                <h3 class="text-lg font-bold">Bottom Modal</h3>
                <p class="py-4">This modal appears at the bottom.</p>
                <div class="modal-action">
                    <form method="dialog"><button class="btn">Close</button></form>
                </div>
            </div>
            <form method="dialog" class="modal-backdrop"><button>close</button></form>
        </dialog>

        <!-- Responsive -->
        <h2 class="text-xl font-bold" style="margin-bottom: 1rem;">Responsive Modal</h2>
        <p style="opacity: 0.7; margin-bottom: 1rem;">Full-screen on mobile, centered on desktop.</p>
        <button class="btn btn-primary" style="margin-bottom: 2rem;"
            onclick="document.getElementById('modal_responsive').showModal()">
            Open Responsive Modal
        </button>

        <dialog id="modal_responsive" class="modal modal-bottom sm:modal-middle">
            <div class="modal-box">
                <h3 class="text-lg font-bold">Responsive Modal</h3>
                <p class="py-4">This modal is full-width at the bottom on mobile, and centered on larger screens.</p>
                <div class="modal-action">
                    <form method="dialog">
                        <button class="btn">Close</button>
                    </form>
                </div>
            </div>
            <form method="dialog" class="modal-backdrop">
                <button>close</button>
            </form>
        </dialog>


    </div>
</div>

<script>
    // Use examplify to run the code and show preview
    (function () {
        // Basic example
        const basicCodeEl = document.getElementById('basic-code');
        const basicPreview = document.getElementById('basic-preview');

        if (typeof examplify !== 'undefined' && basicCodeEl) {
            const result = examplify(basicCodeEl, {
                scripts: ['/lightview.js', '/lightview-x.js'],
                type: 'module',
                html: '<div id="demo"></div>',
                height: '60px'
            });

            if (result && result.iframe) {
                basicPreview.appendChild(result.iframe);
                result.iframe.style.border = '1px solid oklch(var(--bc) / 0.2)';
                result.iframe.style.borderRadius = '0.5rem';
            }
        }

        // Reactive example
        const reactiveCodeEl = document.getElementById('reactive-code');
        const reactivePreview = document.getElementById('reactive-preview');

        if (typeof examplify !== 'undefined' && reactiveCodeEl) {
            const result = examplify(reactiveCodeEl, {
                scripts: ['/lightview.js', '/lightview-x.js'],
                type: 'module',
                html: '<div id="demo"></div>',
                height: '60px'
            });

            if (result && result.iframe) {
                reactivePreview.appendChild(result.iframe);
                result.iframe.style.border = '1px solid oklch(var(--bc) / 0.2)';
                result.iframe.style.borderRadius = '0.5rem';
            }
        }
    })();
</script>